#grid {
	.basic (@gridColumns, @withPrefix, @withSuffix) {
		@namespace: ;
		#grid > .basic (@namespace, @gridColumns, @withPrefix, @withSuffix);
	}
	.basic (@namespace, @gridColumns, @withPrefix, @withSuffix) {
		.spanX (@index) when (@index < @gridColumns + 1) {
			.@{namespace}span-@{index} {
				.span (@index);
			}
			.span (@columns) {
				@spanWidth: (100% / @gridColumns) * @columns;
				width: @spanWidth - @grid-ie8-gutterWidth/2;
				width: ~"-webkit-calc(@{spanWidth} - 20px)";
				width:    ~"-moz-calc(@{spanWidth} - 20px)";
				width:      ~"-o-calc(@{spanWidth} - 20px)";
				width:         ~"calc(@{spanWidth} - 20px)";
			}
			.spanX (@index + 1);
		}
		
		.withPrefix (@withPrefix) when (@withPrefix = true) {
			.prefixX (@index) when (@index < @gridColumns) {
				.@{namespace}prefix-@{index} {
					.prefix (@index);
				}
				.prefixX (@index + 1);
			}
			.prefix (@columns) {
				@prefixWidth: (100% / @gridColumns) * @columns;
				margin-left: @prefixWidth + @grid-ie8-gutterWidth/2;
				margin-left: ~"-webkit-calc(@{prefixWidth} + 20px)";
				margin-left:    ~"-moz-calc(@{prefixWidth} + 20px)";
				margin-left:      ~"-o-calc(@{prefixWidth} + 20px)";
				margin-left:         ~"calc(@{prefixWidth} + 20px)";
			}
			.prefixX (1);
		}

		.withSuffix (@withSuffix) when (@withSuffix = true) {
			.suffixX (@index) when (@index < @gridColumns) {
				.@{namespace}suffix-@{index} {
					.suffix (@index);
				}
				.suffixX (@index + 1);
			}
			.suffix (@columns) {
				margin-right: (100% / @gridColumns) * @columns;
				margin-right: (100% / @gridColumns) * @columns~"\9";
			}
			.suffixX (1);
		}

		.spanX (1);
		.withPrefix (@withPrefix);
		.withSuffix (@withSuffix);
	}
}